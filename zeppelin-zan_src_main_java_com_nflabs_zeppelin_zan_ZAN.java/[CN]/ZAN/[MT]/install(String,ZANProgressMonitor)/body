{
  Meta meta;
  try {
    meta=getMeta(libraryName);
  }
 catch (  IOException e) {
    throw new ZANException(e);
  }
  if (meta == null) {
    throw new ZANException(libraryName + " not exists");
  }
  File lp=getLocalLibraryPath(libraryName);
  try {
    if (lp.exists() == false) {
      CloneCommand clone=Git.cloneRepository();
      clone.setURI(meta.repository);
      clone.setDirectory(lp);
      clone.setBranch(meta.branch);
      clone.setNoCheckout(true);
      if (progressListener != null) {
        clone.setProgressMonitor(progressListener);
      }
      clone.call();
    }
    Git git=Git.open(lp);
    git.fetch().call();
    git.checkout().setName(meta.branch).setCreateBranch(true).setUpstreamMode(CreateBranchCommand.SetupUpstreamMode.SET_UPSTREAM).setStartPoint("origin/" + meta.branch).call();
    git.reset().setRef(meta.commit).setMode(ResetType.HARD).call();
    sync(libraryName);
  }
 catch (  InvalidRemoteException e) {
    throw new ZANException(e);
  }
catch (  TransportException e) {
    throw new ZANException(e);
  }
catch (  GitAPIException e) {
    throw new ZANException(e);
  }
catch (  IOException e) {
    throw new ZANException(e);
  }
}
