{
  Note note=notebook.createNote();
  note.getNoteReplLoader().setInterpreters(factory.getDefaultInterpreterSettingList());
  Paragraph p=note.addParagraph();
  Map config=new HashMap<String,Object>();
  p.setConfig(config);
  p.setText("p1");
  config=note.getConfig();
  config.put("enabled",true);
  config.put("cron","* * * * * ?");
  config.put("releaseresource","true");
  note.setConfig(config);
  notebook.refreshCron(note.id());
  while (p.getStatus() != Status.FINISHED) {
    Thread.sleep(100);
  }
  Date dateFinished=p.getDateFinished();
  assertNotNull(dateFinished);
  for (  InterpreterSetting setting : note.getNoteReplLoader().getInterpreterSettings()) {
    notebook.getInterpreterFactory().restart(setting.id());
  }
  Thread.sleep(1000);
  while (p.getStatus() != Status.FINISHED) {
    Thread.sleep(100);
  }
  assertNotEquals(dateFinished,p.getDateFinished());
  config.put("cron",null);
  note.setConfig(config);
  notebook.refreshCron(note.id());
}
