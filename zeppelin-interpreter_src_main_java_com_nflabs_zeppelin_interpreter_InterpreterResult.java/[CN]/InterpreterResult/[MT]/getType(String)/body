{
  if (msg == null) {
    return Type.TEXT;
  }
  Type[] types=Type.values();
  for (  Type t : types) {
    String magic="%" + t.name().toLowerCase();
    if (msg.startsWith(magic + " ") || msg.startsWith(magic + "\n")) {
      return t;
    }
  }
  return Type.TEXT;
}
