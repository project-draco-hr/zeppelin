{
  if (aborted) {
    setStatus(Status.ABORT);
    aborted=false;
    return;
  }
  JobProgressPoller progressUpdator=null;
  try {
    setStatus(Status.RUNNING);
    progressUpdator=new JobProgressPoller(this,progressUpdateIntervalMs);
    progressUpdator.start();
    dateStarted=new Date();
    result=jobRun();
    dateFinished=new Date();
    progressUpdator.terminate();
    if (aborted) {
      setStatus(Status.ABORT);
    }
 else {
      setStatus(Status.FINISHED);
    }
  }
 catch (  NullPointerException e) {
    logger().error("Job failed",e);
    progressUpdator.terminate();
    this.exception=e;
    result=e.getMessage();
    errorMessage=getStack(e);
    dateFinished=new Date();
    setStatus(Status.ERROR);
  }
catch (  Throwable e) {
    logger().error("Job failed",e);
    progressUpdator.terminate();
    this.exception=e;
    result=e.getMessage();
    errorMessage=getStack(e);
    dateFinished=new Date();
    setStatus(Status.ERROR);
  }
 finally {
    aborted=false;
  }
}
