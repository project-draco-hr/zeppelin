{
  Artifact artifact=new DefaultArtifact(inferScalaVersion(dependency));
  DependencyFilter classpathFlter=DependencyFilterUtils.classpathFilter(JavaScopes.COMPILE);
  PatternExclusionsDependencyFilter exclusionFilter=new PatternExclusionsDependencyFilter(inferScalaVersion(excludes));
  CollectRequest collectRequest=new CollectRequest();
  collectRequest.setRoot(new Dependency(artifact,JavaScopes.COMPILE));
synchronized (repos) {
    for (    RemoteRepository repo : repos) {
      collectRequest.addRepository(repo);
    }
  }
  DependencyRequest dependencyRequest=new DependencyRequest(collectRequest,DependencyFilterUtils.andFilter(exclusionFilter,classpathFlter));
  return system.resolveDependencies(session,dependencyRequest).getArtifactResults();
}
