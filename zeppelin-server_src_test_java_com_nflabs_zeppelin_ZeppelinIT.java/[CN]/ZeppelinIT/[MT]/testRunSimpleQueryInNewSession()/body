{
  WebDriver driver=getWebDriver();
  try {
    WebElement start=driver.findElement(By.partialLinkText("Start"));
    start.click();
    (new WebDriverWait(driver,10)).until(new ExpectedCondition<Boolean>(){
      public Boolean apply(      WebDriver d){
        return d.findElement(By.linkText("New")).isDisplayed();
      }
    }
);
    driver.findElement(By.linkText("New")).click();
    (new WebDriverWait(driver,10)).until(new ExpectedCondition<Boolean>(){
      public Boolean apply(      WebDriver d){
        return d.findElement(By.linkText("Run")).isDisplayed();
      }
    }
);
    driver.findElement(By.xpath("//div[@id='zqlEditor']//textarea")).sendKeys("create table if not exists test " + Keys.chord(Keys.SHIFT,"9") + "id STRING);\n");
    driver.findElement(By.xpath("//div[@id='zqlEditor']//textarea")).sendKeys("\nshow tables;");
    driver.findElement(By.linkText("Run")).click();
    (new WebDriverWait(driver,60)).until(new ExpectedCondition<Boolean>(){
      public Boolean apply(      WebDriver d){
        return d.findElement(By.xpath("//div[@id='visualizationContainer']//iframe")).isDisplayed();
      }
    }
);
    WebDriver iframe=driver.switchTo().frame(driver.findElement(By.xpath("//div[@id='visualizationContainer']//iframe")));
    (new WebDriverWait(iframe,20)).until(new ExpectedCondition<Boolean>(){
      public Boolean apply(      WebDriver d){
        return d.findElement(By.xpath("//table//td[text()='test']")).isDisplayed();
      }
    }
);
  }
 catch (  WebDriverException e) {
    File scrFile=((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
    System.out.println("Screenshot in: " + scrFile.getAbsolutePath());
    fail("Error occured " + e.getMessage());
  }
 finally {
    driver.quit();
  }
}
