{
  if (buf.length() < cursor) {
    cursor=buf.length();
  }
  String completionText=getCompletionTargetString(buf,cursor);
  if (completionText == null) {
    completionText="";
    cursor=completionText.length();
  }
  if (Utils.isScala2_10()) {
    ScalaCompleter c=(ScalaCompleter)Utils.invokeMethod(completor,"completor");
    Candidates ret=c.complete(completionText,cursor);
    List<String> candidates=WrapAsJava$.MODULE$.seqAsJavaList(ret.candidates());
    List<InterpreterCompletion> completions=new LinkedList<InterpreterCompletion>();
    for (    String candidate : candidates) {
      completions.add(new InterpreterCompletion(candidate,candidate));
    }
    return completions;
  }
 else {
    return new LinkedList<InterpreterCompletion>();
  }
}
