{
  initialize();
  if (query == null)   return null;
  if (query.startsWith("!")) {
    String cmd=query.substring(1);
    try {
      return shellCommand(cmd);
    }
 catch (    ExecuteException e) {
      logger().error("Failed to execute shell command " + cmd,e);
    }
catch (    IOException e) {
      logger().error("Failed to execute shell command " + cmd,e);
    }
catch (    ResultDataException e) {
      logger().error("Failed to execute shell command " + cmd,e);
    }
  }
  List<URI> resources=getResources();
  for (  URI res : resources) {
    driver.addResource(res);
  }
  logger().info("executeQuery : " + query);
  return driver.query(query);
}
