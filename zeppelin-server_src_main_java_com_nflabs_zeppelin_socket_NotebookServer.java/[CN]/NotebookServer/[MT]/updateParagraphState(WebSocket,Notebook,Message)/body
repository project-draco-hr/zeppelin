{
  final String paragraphId=(String)fromMessage.get("id");
  if (paragraphId == null) {
    return;
  }
  final Note note=notebook.getNote(getOpenNoteId(conn));
  Paragraph p=note.getParagraph(paragraphId);
  boolean state=(boolean)fromMessage.get("isClose");
  boolean editorState=(boolean)fromMessage.get("isEditorClose");
  if (state) {
    p.close();
  }
 else {
    p.open();
  }
  if (editorState) {
    p.closeEditor();
  }
 else {
    p.openEditor();
  }
  note.persist();
  broadcastNote(note.id(),new Message(OP.NOTE).put("note",note));
}
