{
  Notebook notebook=notebook();
  try {
    Message messagereceived=deserializeMessage(msg);
    LOG.info("RECEIVE << " + messagereceived.op);
switch (messagereceived.op) {
case LIST_NOTES:
      broadcastNoteList();
    break;
case GET_NOTE:
  sendNote(conn,notebook,messagereceived);
break;
case NEW_NOTE:
createNote(conn,notebook);
break;
case DEL_NOTE:
removeNote(conn,notebook,messagereceived);
break;
case PARAGRAPH_PARAM:
addParamsForParagraph(conn,notebook,messagereceived);
break;
case COMMIT_PARAGRAPH:
updateParamsForParagraph(conn,notebook,messagereceived);
break;
case PARAGRAPH_UPDATE_STATE:
updateParagraphState(conn,notebook,messagereceived);
break;
case RUN_PARAGRAPH:
runParagraph(conn,notebook,messagereceived);
break;
case CANCEL_PARAGRAPH:
cancelParagraph(conn,notebook,messagereceived);
break;
case PARAGRAPH_REMOVE:
removeParagraph(conn,notebook,messagereceived);
break;
case NOTE_UPDATE:
updateNote(conn,notebook,messagereceived);
break;
case COMPLETION:
completion(conn,notebook,messagereceived);
break;
default :
broadcastNoteList();
break;
}
}
 catch (Exception e) {
LOG.error("Can't handle message",e);
}
}
