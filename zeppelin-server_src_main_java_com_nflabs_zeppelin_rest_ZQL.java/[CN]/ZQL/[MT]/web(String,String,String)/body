{
  ZQLJob session=sessionManager.get(sessionId);
  if (session == null) {
    return STATUS_NOT_FOUND;
  }
  if (path == null || path.equals("/") || path.length() == 0) {
    path="/index.erb";
  }
  List<Z> plans=session.getPlan();
  for (  Z plan : plans) {
    for (Z z=plan; z != null; z=z.prev()) {
      if (z.getId().equals(zId)) {
        try {
          InputStream ins=z.readWebResource(path);
          if (ins == null) {
            return null;
          }
 else {
            return Response.ok(IOUtils.toByteArray(ins),typeByExtention(path)).build();
          }
        }
 catch (        ZException e) {
          logger.error("Can't read web resource",e);
          return new JsonResponse(Status.INTERNAL_SERVER_ERROR,e.getMessage()).build();
        }
catch (        IOException e) {
          logger.error("IOexception",e);
          return new JsonResponse(Status.INTERNAL_SERVER_ERROR,e.getMessage()).build();
        }
      }
    }
  }
  return javax.ws.rs.core.Response.status(Status.NOT_FOUND).entity("").build();
}
