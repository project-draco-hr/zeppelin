{
  GsonBuilder gsonBuilder=new GsonBuilder();
  gsonBuilder.setPrettyPrinting();
  Gson gson=gsonBuilder.create();
  File dir=new File(conf.getString(ConfVars.ZEPPELIN_NOTEBOOK_DIR) + "/" + id);
  if (!dir.exists()) {
    dir.mkdirs();
  }
 else   if (dir.isFile()) {
    throw new RuntimeException("File already exists" + dir.toString());
  }
  File file=new File(conf.getString(ConfVars.ZEPPELIN_NOTEBOOK_DIR) + "/" + id+ "/note.json");
  logger().info("Persist note {} into {}",id,file.getAbsolutePath());
  String json=gson.toJson(this);
  FileOutputStream out=new FileOutputStream(file);
  out.write(json.getBytes(conf.getString(ConfVars.ZEPPELIN_ENCODING)));
  out.close();
}
