{
  tmpDir=new File(System.getProperty("java.io.tmpdir") + "/ZeppelinLTest_" + System.currentTimeMillis());
  tmpDir.mkdir();
  dataDir=new File(System.getProperty("java.io.tmpdir") + "/ZeppelinLTest_" + System.currentTimeMillis()+ "/data");
  dataDir.mkdir();
  System.setProperty("hive.local.warehouse","file://" + dataDir.getAbsolutePath());
  System.setProperty(ConfVars.ZEPPELIN_ZAN_LOCAL_REPO.getVarName(),tmpDir.toURI().toString());
  System.setProperty(ConfVars.ZEPPELIN_JOB_DIR.getVarName(),tmpDir.getAbsolutePath());
  z=UtilsForTests.createZengine();
  this.schedulerFactory=new SchedulerFactory();
  this.jm=new ZQLJobManager(z,schedulerFactory.createOrGetFIFOScheduler("analyze"),z.getConf().getString(ConfVars.ZEPPELIN_JOB_DIR));
}
