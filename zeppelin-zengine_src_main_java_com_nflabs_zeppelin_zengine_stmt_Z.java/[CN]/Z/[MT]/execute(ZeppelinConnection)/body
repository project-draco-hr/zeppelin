{
  if (executed) {
    return this;
  }
  initialize();
  this.connection=connection;
  if (this.hasPrev()) {
    prev().execute(connection);
  }
  executeResource(getResources());
  String q;
  String query=getQuery();
  if (query != null) {
    String[] querySplit=Util.split(query,';');
    List<String> queries=new LinkedList<String>();
    for (int i=0; i < querySplit.length; i++) {
      String qs=querySplit[i];
      if (qs == null)       continue;
      qs=qs.trim();
      if (qs.length() == 0)       continue;
      queries.add(qs);
    }
    for (int i=0; i < queries.size() - 1; i++) {
      q=queries.get(i);
      lastQueryResult=executeQuery(q);
    }
    if (queries.size() > 0) {
      q=queries.get(queries.size() - 1);
      if (isUnNamed()) {
        lastQueryResult=executeQuery(q);
      }
 else {
        if (!isSaveableQuery(q)) {
          throw new ZException("Can not save query " + q + " into table "+ name());
        }
        if (isTable()) {
          lastQueryResult=connection.createTableFromQuery(name(),q);
        }
 else {
          lastQueryResult=connection.createViewFromQuery(name(),q);
        }
      }
    }
  }
  webEnabled=isWebEnabled();
  executed=true;
  return this;
}
