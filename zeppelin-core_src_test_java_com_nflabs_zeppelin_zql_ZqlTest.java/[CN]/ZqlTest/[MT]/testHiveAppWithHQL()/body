{
  new File(tmpDir.getAbsolutePath() + "/testapp2").mkdir();
  FileUtils.writeStringToFile(new File(tmpDir.getAbsolutePath() + "/testapp2/hql"),"hql template ${hql} option ${opt1} ${opt2=10} ${opt3=100}");
  App app=App.load(new File(tmpDir.getAbsolutePath() + "/testapp2"));
  assertNotNull(app);
  HashMap<String,String> params=new HashMap<String,String>();
  params.put("opt1","optv1");
  params.put("opt2","0");
  assertEquals("hql template select * from tbl option optv1 0 100",app.getQuery(params,"select * from tbl"));
}
