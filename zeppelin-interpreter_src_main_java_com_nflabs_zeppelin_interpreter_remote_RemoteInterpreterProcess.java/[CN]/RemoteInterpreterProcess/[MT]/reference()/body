{
synchronized (referenceCount) {
    if (executor == null) {
      try {
        findRandomOpenPortOnAllLocalInterfaces();
      }
 catch (      IOException e1) {
        throw new InterpreterException(e1);
      }
      CommandLine cmdLine=CommandLine.parse(interpreterRunner);
      cmdLine.addArgument("-d",false);
      cmdLine.addArgument(interpreterDir,false);
      cmdLine.addArgument("-p",false);
      cmdLine.addArgument(Integer.toString(port),false);
      executor=new DefaultExecutor();
      watchdog=new ExecuteWatchdog(ExecuteWatchdog.INFINITE_TIMEOUT);
      executor.setWatchdog(watchdog);
      running=true;
      try {
        executor.execute(cmdLine,this);
      }
 catch (      IOException e) {
        running=false;
        throw new InterpreterException(e);
      }
    }
    try {
      Thread.sleep(5000);
    }
 catch (    InterruptedException e1) {
    }
    transport=new TSocket("localhost",port);
    try {
      transport.open();
    }
 catch (    TTransportException e) {
      throw new InterpreterException(e);
    }
    TProtocol protocol=new TBinaryProtocol(transport);
    client=new RemoteInterpreterService.Client(protocol);
    return referenceCount.incrementAndGet();
  }
}
