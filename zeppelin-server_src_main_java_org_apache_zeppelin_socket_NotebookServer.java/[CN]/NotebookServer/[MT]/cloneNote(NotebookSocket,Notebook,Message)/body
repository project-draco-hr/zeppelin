{
  String noteId=getOpenNoteId(conn);
  String name=(String)fromMessage.get("name");
  Note sourceNote=notebook.getNote(noteId);
  Note newNote=notebook.createNote();
  if (name != null) {
    newNote.setName(name);
  }
  List<String> boundInterpreterSettingsIds=notebook.getBindedInterpreterSettingsIds(sourceNote.id());
  notebook.bindInterpretersToNote(newNote.id(),boundInterpreterSettingsIds);
  List<Paragraph> paragraphs=sourceNote.getParagraphs();
  for (  Paragraph para : paragraphs) {
    Paragraph p=(Paragraph)para.clone();
    newNote.addParagraph(p);
  }
  newNote.persist();
  broadcastNote(newNote);
  broadcastNoteList();
}
