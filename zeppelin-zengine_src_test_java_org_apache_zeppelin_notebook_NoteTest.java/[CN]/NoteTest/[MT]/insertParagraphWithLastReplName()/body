{
  InterpreterSetting interpreterSetting=Mockito.mock(InterpreterSetting.class);
  when(interpreterSetting.getName()).thenReturn("spark");
  when(interpreterFactory.getDefaultInterpreterSetting(anyString())).thenReturn(interpreterSetting);
  Note note=new Note(repo,interpreterFactory,jobListenerFactory,index,credentials,noteEventListener);
  note.putDefaultReplName();
  when(interpreterFactory.getInterpreter(note.getId(),"spark")).thenReturn(new MockInterpreter2(null));
  Paragraph p=note.insertParagraph(note.getParagraphs().size());
  assertEquals("%spark ",p.getText());
}
