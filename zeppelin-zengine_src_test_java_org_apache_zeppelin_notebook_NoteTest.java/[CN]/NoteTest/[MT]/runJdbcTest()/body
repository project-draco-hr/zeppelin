{
  when(interpreterFactory.getInterpreter(anyString(),eq("mysql"))).thenReturn(null);
  when(interpreterFactory.getInterpreter(anyString(),eq("jdbc"))).thenReturn(interpreter);
  when(interpreter.getScheduler()).thenReturn(scheduler);
  String pText="%mysql show databases";
  Note note=new Note(repo,interpreterFactory,jobListenerFactory,index,credentials);
  Paragraph p=note.addParagraph();
  p.setText(pText);
  note.run(p.getId());
  ArgumentCaptor<Paragraph> pCaptor=ArgumentCaptor.forClass(Paragraph.class);
  verify(scheduler,only()).submit(pCaptor.capture());
  verify(interpreterFactory,times(2)).getInterpreter(anyString(),anyString());
  assertEquals("Change paragraph text","%jdbc(mysql) show databases",pCaptor.getValue().getEffectiveText());
  assertEquals("Change paragraph text",pText,pCaptor.getValue().getText());
}
