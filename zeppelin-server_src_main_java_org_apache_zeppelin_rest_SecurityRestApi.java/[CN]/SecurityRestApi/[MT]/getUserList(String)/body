{
  List<String> usersList=new ArrayList<>();
  try {
    GetUserList getUserListObj=new GetUserList();
    Collection realmsList=SecurityUtils.getRealmsList();
    for (Iterator<Realm> iterator=realmsList.iterator(); iterator.hasNext(); ) {
      Realm realm=iterator.next();
      String name=realm.getName();
      if (name.equals("iniRealm")) {
        usersList.addAll(getUserListObj.getUserList((IniRealm)realm));
      }
 else       if (name.equals("ldapRealm")) {
        usersList.addAll(getUserListObj.getUserList((JndiLdapRealm)realm));
      }
 else       if (name.equals("jdbcRealm")) {
        usersList.addAll(getUserListObj.getUserList((JdbcRealm)realm));
      }
    }
  }
 catch (  Exception e) {
    LOG.error("Exception in retrieving Users from realms ",e);
  }
  List<String> autoSuggestList=new ArrayList<>();
  Collections.sort(usersList);
  int maxLength=0;
  for (int i=0; i < usersList.size(); i++) {
    String userLowerCase=usersList.get(i).toLowerCase();
    String searchTextLowerCase=searchText.toLowerCase();
    if (userLowerCase.indexOf(searchTextLowerCase) != -1) {
      maxLength++;
      autoSuggestList.add(usersList.get(i));
    }
    if (maxLength == 5) {
      break;
    }
  }
  return new JsonResponse<>(Response.Status.OK,"",autoSuggestList).build();
}
