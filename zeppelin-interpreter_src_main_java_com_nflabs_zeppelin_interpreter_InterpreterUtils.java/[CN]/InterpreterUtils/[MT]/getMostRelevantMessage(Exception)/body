{
  if (ex instanceof InvocationTargetException) {
    Throwable cause=((InvocationTargetException)ex).getCause();
    if (cause != null) {
      return cause.getMessage();
    }
  }
  String message=ex.getMessage();
  if (message == null || message == "") {
    return ex.toString();
  }
  return message;
}
