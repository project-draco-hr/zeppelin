{
  new File(tmpDir.getAbsolutePath() + "/test").mkdir();
  File erb=new File(tmpDir.getAbsolutePath() + "/test/zql.erb");
  FileOutputStream out=new FileOutputStream(erb);
  out.write(("CREATE VIEW <%= z." + Q.OUTPUT_VAR_NAME + " %> AS select * from table limit <%= z.param('limit') %>\n").getBytes());
  out.close();
  FileOutputStream outInvalid=new FileOutputStream(new File(tmpDir.getAbsolutePath() + "/test/no_resource"));
  outInvalid.write("".getBytes());
  outInvalid.close();
  FileOutputStream resource=new FileOutputStream(new File(tmpDir.getAbsolutePath() + "/test/test_data.log"));
  resource.write("".getBytes());
  resource.close();
  System.out.println(tmpDir.toURI().toString());
  System.setProperty(ConfVars.ZEPPELIN_ZAN_LOCAL_REPO.getVarName(),tmpDir.toURI().toString());
  Z.configure();
  try {
    new L("abc");
    assertTrue(false);
  }
 catch (  ZException e) {
    assertTrue(true);
  }
  L test=new L("test");
  test.withParam("limit",3);
  test.withName("hello");
  assertEquals("CREATE VIEW " + test.name() + " AS select * from table limit 3",test.getQuery());
  List<URI> res=test.getResources();
  assertEquals(1,res.size());
  assertEquals("file://" + tmpDir.getAbsolutePath() + "/test/test_data.log",res.get(0).toString());
  test.release();
}
