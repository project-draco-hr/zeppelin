{
  WebAppContext webApp=new WebAppContext();
  File warPath=new File(conf.getString(ConfVars.ZEPPELIN_WAR));
  if (warPath.isDirectory()) {
    webApp.setResourceBase(warPath.getPath());
    webApp.setContextPath("/");
    webApp.setParentLoaderPriority(true);
  }
 else {
    webApp.setWar(warPath.getAbsolutePath());
  }
  String scriptPath="/scripts/scripts.js";
  webApp.addServlet(new ServletHolder(new AppScriptServlet(conf.getWebSocketPort(),scriptPath)),"/*");
  return webApp;
}
